<div ng-controller="JobsController">

  <!-- Setting up the Job Table -->
  <h2>{{user.name}}'s Jobs</h2>
  <table>
    <tr>
      <th class="clickable" ng-click="sortBy('fav')">
        Favorite
        <span class="sortorder" ng-show="propertyName === 'fav'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('company')">
        Company
        <span class="sortorder" ng-show="propertyName === 'company'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('position')">
        Position
        <span class="sortorder" ng-show="propertyName === 'position'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('deadline')">
        Deadline
        <span class="sortorder" ng-show="propertyName === 'deadline'" ng-class="{reverse: reverse}"></span>
      </th>
      <th class="clickable" ng-click="sortBy('status')">
        Status
        <span class="sortorder" ng-show="propertyName === 'status'" ng-class="{reverse: reverse}"></span>
      </th>
      <th>Delete</th>
      <th>Edit</th>
    </tr>
  <div>
    <!-- Sorts by clicked item first, and company name second -->
    <tr ng-repeat="job in data.jobs | orderBy:'company':reverse | orderBy:propertyName:reverse">
      <td><span class="clickable fav" ng-class="{'glyphicon glyphicon-star': job.fav, 'glyphicon glyphicon-star-empty': !job.fav}" ng-click="toggleFav(job)"/></td>
      <td>{{job.company}}</td>
      <td>{{job.position}}</td>
      <td>{{job.deadline}}</td>
      <td>
        <uib-progressbar class="progress active" value="progression[job.status].value" type="{{progression[job.status].type}}"></uib-progressbar>
        {{job.status}}
      </td>
      <td><span class="clickable glyphicon glyphicon-remove" style="color:red" ng-click="delJob(job)"/></td>
      <td><span class="clickable glyphicon glyphicon-pencil" style="color:black" ng-click="editJob(job)"/></td>
    </tr>
  </div>
</table>
<br>
<!-- Button for Modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#userModal">Add Job</button>
<!-- Modal Settings -->
<div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <h4 class="modal-title" id="modalLabel">Message</h4>
      </div>
      <div class="modal-body">
        <form name = gitHiredForm ng-submit="postJob()" novalidate>
          <div class="form-group required">
          <!-- Company Form Group -->
              <label for="user-company" class="control-label">
              Company:
                <span class="asteriskField">
                *
                </span>
              </label>
            <input name='job' class="form-control" ng-model="job.company" placeholder="company"> <!-- Input for the job.company -->
          </div>
          <!-- Position Form Group -->
          <div class ="form-group">
            <label for="user-position" class="control-label">Position:</label>
            <input name='job' class="form-control" ng-model="job.position" placeholder="position"> <!-- Input for the job.position -->
          </div>
          <div class ="form-group">
            <label for="user-deadline" class="control-label">Deadline:</label> <!-- Deadline Form Group -->
             <div class="input-group date" data-provide="datepicker">
              <input name='job' class="form-control" ng-model="job.deadline" placeholder="mm/dd/yyyy">
              <div class="input-group-addon">
                <span class="glyphicon glyphicon-th"> </span>
              </div>
            </div>
          </div>
          <br>
          <!-- Status Form Group -->
          <!-- NOTE: Any changes to the Status choices MUST match those in the Controller -->
          <div class ="select form-group">
              <label for="user-status" class="control-label">Status:</label>
              <select name='job' class="select form-control" id="user-status" ng-model="job.status"> <!-- Creating a Select dropdown for Starting,WIP and Completed -->
                <option value="Interested">
                 Interested
                </option>
                <option value="Outreach">
                 Outreach
                </option>
                <option disabled>
                 ---
               </option>
                <option value="Phone Interview">
                 Phone Interview
                </option>
                <option value="Coding Challenge">
                 Coding Challenge
                </option>
                <option value="Onsite Interview">
                 Onsite Interview
                </option>
                <option value="Offer Received">
                 Offer Received
                </option>
                <option disabled>
                 ---
                </option>
                <option value="Employer Declined">
                 Employer Declined
                </option>
                <option value="Offer Accepted">
                 Offer Accepted
                </option>
                <option value="Offer Declined">
                 Offer Declined
                </option>
             </select>
             <!-- End of Form Group -->
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" value ="listing" class="btn btn-primary">Add Information</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>


<!-- Extra Style Guide -->
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
</style>

<!--

 /* $(document).ready(function(){
    var date_input=$('input[name="date"]'); //our date input has the name "date"
    date_input.datepicker({
      format: 'mm/dd/yyyy',
      container: container,
      todayHighlight: true,
      autoclose: true,
    })
  })*/ -->
